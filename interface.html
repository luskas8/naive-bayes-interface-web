<html>
	
	<head>
		
		<title>Trabalho Interdisciplinar de PEA e POO</title>

		<link rel="stylesheet" href="visual.css">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

	</head>

	<body>

		
		
		<h1>Trabalho Interdisciplinar de PEA e POO </h1>

		<h2>Insira os nomes abaixo</h2>
		<div id="geral" class="w3-display-middle">

			<div id="texto_para_enviar">
				<form id="formu" autocomplete="off">

						<textarea id="nomes_antes" name="area_nomes_antes" rows="4" cols="50" placeholder="Insira aqui os nomes..."></textarea>

						<p>Clique no botão acima para que os nomes possam ser enviados para a Rede bayesiana e serem processadas, identificando o respectivo gênero dos nomes</p>

						<div id="botao_enviar">
							<button type="submit" onclick='getNomes()'>CLIQUE AQUI</button>
						</div>

				</form>	
			</div>

			<div id="texto_recebido">
				<textarea id="nomes_depois" name="area_nomes_depois" rows="4" cols="50" placeholder="Nomes já processados..." readonly></textarea>
			</div>

		</div>

		<!-- //-------------------------------------------------------------------------------------------// -->

		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

		<script>
			
			function getNomes(){
				
				let nomes = document.querySelector("#nomes_antes");
				let form_geral = document.querySelector("#formu");

				event.preventDefault();

				let dados = {
					nomes: nomes_antes.value.split(',').map(nome => {
						return nome.replace(' ', '')
					})
				};

				var queryString = Object.keys(dados.nomes).map(key => key + '=' + dados.nomes[key]).join('&');

				const url = `http://localhost:3333/?${queryString}`
				console.log(dados.nomes)

				fetch(url, {

					mode: 'cors'

				}).then(function(response){
					return response.json()
				}).then(function(response){
					console.log("Nomes já processados!", response)
					callNomes(response.data)
				})
			}

			function callNomes(nomes){

				let nomes_processados = document.querySelector("#nomes_depois");

				nomes_processados.value = nomes;

			}

		</script>

	</body>

</html>